
메서드 설계는 클래스 설계와 아주 밀접한 관련이 있습니다. 메서드 설계가 좋지 않으면, 클래스 설계도 나빠집니다. 반대로 메서드 설계가 좋으면, 클래스 설계도 좋아집니다.

## 반드시 현재 클래스의 인스턴스 변수 사용하기

인스턴스 변수를 안전하게 조작하도록 메서드를 설계하면, 클래스 내부가 정상적인 상태인지 보장할 수 있습니다.

메서드는 반드시 현재 클래스의 인스턴스 변수를 사용하도록 설계합니다. 생성자에 가드를 만들어 두면, 인스턴스 변수를 안전하게 사용하기 위한 첫걸음을 뗐다고 할 수 잇습니다.

반면 다른 클래스의 인스턴스 변수를 변경하는 메서드는 좋지 않습니다. 응집도가 낮은 구조가 될 수 있기 때문입니다. 다른 클래스의 인스턴스 변수를 변경하는 메서드를 작성하고 싶다면, 변경된 내용을 다루는 새로운 인스턴스를 생성하고 이를 리턴하는 형태로 구현하는 것이 좋습니다.


---

## 불변을 활용해서 예상할 수 있는 메서드 만들기

가변 인스턴스 변수 등을 변경하는 메서드는 의도하지 않게 다른 부분에 영향을 줄 수 있습니다. 이렇게 되면 예상하지 못한 동작이 발생할 수 있으며, 유지 보수가 어려워집니다. 불변을 활용해서 예상치 못한 동작 자체를 막을 수 있게 설계하기 바랍니다.


---

## 묻지 말고 명령하라

어떤 클래스가 다른 클래스의 상태를 판단하거나, 상태에 따라 값을 변경하는 등 '다른 클래스를 확인하고 조작하는 메서드 구조'는 응집도가 낮은 구조입니다.

메서드를 호출하는 쪽에서는 복잡한 처리를 하지 않는 것이 좋습니다. 이때 '묻지 말고 명령하라'라는 접근 방법이 유효합니다.


---

## 커맨드/쿼리 분리

아래 메서드는 상태 변경과 추출을 동시에 하고 있습니다.

```java
int gainAndGetPoint() {
	point += 10;
	return point;
}
```

상태 변경과 추출을 동시에 하는 메서드는 여러 문제의 원인이 됩니다. 커맨드 쿼리 분리(CQS) 라는 패턴이 있습니다. 메서드는 커맨드 또는 쿼리 중에 하나만 하도록 설계해야 한다는 패턴입니다.

| 메서드 종류 구분 | 설명                |
| --------- | ----------------- |
| 커맨드           | 상태를 변경하는 것        |
| 쿼리             | 상태를 리턴하는 것        |
| 모디파이어       | 커맨드와 쿼리를 동시에 하는 것 |

상황에 따라 모디파이어로 만들 수밖에 없는 메서드도 있지만, 그야말로 예외이고 최대한 피하는 것이 좋습니다.


---

## 매개변수

매개변수는 입력 값으로 사용합니다. 매개변수 설계 시 주의해야 할 사항을 정리하면, 다음과 같습니다.

#### 1) 불변 매개변수로 만들기

매개변수에 final 수식자를 붙여서 불변으로 만드세요. 매개변수를 변경하고 싶으면, 불변 지역 변수를 만들고, 여기에 변경 값을 할당하는 형태로 구현합ㄴ디ㅏ.

#### 2) 플래그 매개변수 사용하지 않기

플래그 매개변수를 받는 메서드는 코드를 읽는 사람이 메서드가 무슨 일을 하는지 알기 어렵게 만듭니다. 따라서 전략 패턴을 사용하는 등, 다른 구조로 설계를 개선하세요

#### 3) null 전달하지 않기

매개변수로 null 을 전달하지 않게 설계하세요. null을 전달하지 않게 설계하려면, null에 의미를 부여해서는 안 됩니다. 장비를 착용하지 않은 상태를 null 로 나타내는 것이 아니라 Equipmenmt.EMPTY 로 표현하는 방식으로 구현하세요

#### 4) 출력 매개변수 사용하지 않기

매개변수는 입력 값으로 사용하는 것이 기본입니다. 매개 변수를 출력 값으로 사용하면, 코드를 읽는 사람에게 혼란을 줄 수 있습니다.

#### 5) 매개변수는 최대한 적게 사용하기

매개변수는 최대한 적게 설계하는 것이 좋습니다. 메서드에 매개변수가 많다는 것은 메서드가 여러 가지 기능을 처리한다는 의미입니다. 메서드가 처리할 게 많아지면, 그만큼 로직이 복잡해져 이는 다양한 악마들을 불러들입니다.


---

## 리턴 값

리턴 값을 설계할 때도 주의 사항들이 있습니다.

#### 1) 자료형을 사용해서 리턴 값의 의도 나타내기

int 자료형을 리턴하게 만들면, 어떤 값이 어떤 것을 의미하는지 알기 힘듭니다. 따라서 매개변수를 잘못 전달하는 등의 실수가 발생할 수 있습니다.

> 따라서 기본 자료형을 사용하지 말고, 독자적인 자료형을 사용해서 의도를 명확하게 나타내는 것이 좋습니다.

#### 2) null 리턴하지 않기

매개변수로 null을 전달하지 않는 것이 좋듯이, null을 리턴하지 않아야 좋습니다.

#### 3) 오류는 리턴 값으로 리턴하지 말고 예외 발생시키기

오류 값으로 Location(-1, -1) 값을 리턴하는 코드가 있을 수 있습니다. 이러한 구현은 호출하는 쪽에서 오류가 있을 때, 오류 값으로 Location(-1, -1)을 리턴한다는 사실을 알고 있어야 하며, 이를 활용해서 오류 처리를 확실하게 구현해야 합니다.

어떤 값으로 여러 의미를 나타내는 것을 중의적이라고 합니다. 중의적으로 해석할 만한 코드는 피하는 것이 좋습니다.
잘못된 상태에는 어떠한 관용도 베풀어서는 안 됩니다. 리턴 값으로 오류 값을 리턴하지 말고, 곧바로 예외를 발생시켜야 합니다.