
클라우드 MySQL은 기본적으로 사용자가 알고 사용하는 MySQL과 동일합니다. 이전 9개 장에서 자세히 설명한 모범 사례와 기술 역시 똑같이 적용됩니다. 이전 9개 장을 요약하면 다음과 같습니다.

- 성능은 쿼리 응답 시간입니다.
- 인덱스는 성능의 핵심입니다.
- 데이터가 적을수록 저장과 접근 모두에 좋습니다.
- 접근 패턴은 성능을 허용하거나 억제합니다.
- 샤딩은 쓰기와 스토리지를 확장하는 데 필요합니다.
- 서버 메트릭은 워크로드가 MySQL에 미치는 영향을 보여 줍니다.
- 복제 지연은 데이터 손실이므로 피해야 합니다.
- 트랜잭션은 로우 락과 언두 로깅에 영향을 미칩니다.
- 다른 문제는 클라우드에서도 있습니다.

이번 장에서는 주로 클라우드에서 MySQL을 사용할 때 알아야 할 사항을 다룹니다. 여기에 4개의 주요 절이 있습니다.

1. MySQL이 MySQL이 아닌 경우, 즉 호환성입니다.
2. 클라우드에서 다양한 수준의 MySQL 관리에 대한 간단한 논의입니다.
3. 네트워크 지연 시간과 스토리지 I/O와의 관계에 대해 설명합니다.
4. 성능과 돈에 관한 것입니다.


---

## 1. 호환성

클라우드의 MySQL은 MySQL이 아닐 수도 있고 고도로 수정된(그리고 독점적인) MySQL 버전일 수도 있습니다. 클라우드 MySQL의 호환성에는 코드 호환성과 기능 호환성이라는 두 가지 측면이 있습니다.

코드 호환성은 MySQL이 오라클, Percona, MariaDB 에서 게시한 동일한 오픈소스 코드인지 여부입니다. MySQL은 복잡하고 미묘하기 때문에 코드 호환성이 중요하며 귀중한 데이터를 저장하도록 위임합니다. 부정적인 요소(위험)뿐만 아니라모든 문제를 바라보고자 클라우드 공급자는 MySQL을 변경하여 성능 개선, 버그 수정, 고객이 요구하는 기능 등을 추가로 제공합니다.

기능 호환성은 MySQL이 클라우드 공급자나 MySQL 배포판 외부에서 사용할 수 없는 기능을 포함하는지 여부입니다. 예를 들어, 오라클은 MySQL 커뮤니티 서버와 MySQL 엔터프라이즈 에디션이라는 2가지 배포판을 게시합니다. 전자는 오픈소스이고 후자는 독점적인 기능을 포함합니다.


---

## 2. 관리(DBA)

지금까지 MySQL 관리는 그리 다루지 않았고 지금도 그럴 생각이지만, 클라우드 MySQL은 여러분이 알고 다루어야 할 문제를 제기합니다. 즉, MySQL 관리 책임자는 누구일까요?

클라우드 공급자는 MySQL을 백업하고 장기 백업 보존을 제공하며 백업을 복원하는 방법을 제공합니다. 이 모든 것이 매우 중요합니다. 여러분은 책임져야 할 변경 데이터 캡처는 MySQL에서 다른 데이터 스토리지로 바이너리 로그를 덤프하기 위해 복제본처럼 작동하는 다른 도구나 서비스를 포함합니다.

MySQL을 사용하는 엔지니어로서 관리하는 것이 아니라 작업에 방해가 되지 않도록 모든 작업이 관리되고 있다는 것만 알면 됩니다. 일단 알고 나면 이 절에서 읽은 모든 내용은 잊어버리세요. 클라우드 공급자가 MySQL의 인프라 작업을 자동으로 관리해 주므로 본질적인 업무에 집중할 수 있습니다.


---

## 3. 네트워크와 스토리지... 지연 시간

클라우드는 전 세계적이며 광역 네트워크는 지연 시간이 길고 안정성이 낮습니다. 예를 들어 쿼리를 실행하는 데 800us 가 걸린다고 표시하지만, 애플리케이션 성능 모니터링은 쿼리를 실행하는데 60.8ms가 걸린다고 표시합니다. MySQL의 경우 800us, 바다를 통해 목적지까지 네트워크 지연 시간은 60ms 입니다.

고도로 최적화된 쿼리, 데이터와 접근 패턴의 기반을 마련하면 클라우드의 스토리지 대기 시간이 결코 문제가 되지 않을 수 있습니다. 클라우드의 스토리지 대기 시간이 문제라면 워크로드를 추가로 최적화하거나 샤드 또는 더 나은 클라우드 스토리지를 구입해야 합니다. 기억하세요, 넷플릭스는 매우 크고 성공적인 다른 회사와 마찬가지로 클라우드에서 운영됩니다. 클라우드에서 MySQL의 성능 잠재력은 사실상 무제한입니다. 문제는 여러분이 그것을 감당할 수 있는지입니다.


---

## 4. 성능은 곧 돈이다

고객은 애플리케이션이 요구하거나 활용하는 것보다 더 많은 용량에 대해 비용을 지불합니다. 클라우드는 매 바이트와 밀리초 단위의 성능이 시간당 청구되므로 이 책의 모든 모범 사례와 기술이 그 어느 때보다 중요합니다.

아래는 클라우드에서 MySQL을 사용할 때 예상치 못한 요금 청구를 피하기 위해 알아야 할 가장 3가지 중요한 사항입니다.

가장 먼저 알아야 할 것은 기본 컴퓨팅의 각 레벨에 대해 가격이 2배가 된다는 것입니다. 각 레벨의 리소스가 2배가 되기 때문입니다.

두 번째로 알아야 할 것은 클라우드의 모든 것이 비용이 든다는 것입니다. 컴퓨팅 비용은 시작에 불과합니다. 다음 목록에는 컴퓨팅 비용 외에 클라우드의 MySQL에 대한 일반적인 요금이 포함되어 있습니다.

- 스토리지 유형(IOPS)
- 데이터 스토리지(크기)
- 백업(크기와 보존 기간)
- 로그(크기와 보존 기간)
- 고가용성(복제본)
- 리전 간 데이터 전송(크기)
- 암호화 키(데이터 암호화용)
- 비밀(비밀번호 저장용)

게다가 이러한 요금은 인스턴스별로 부과됩니다. 예를 들어, 5개의 읽기 전용 복제본을 만드는 경우 데이터 스토리지, 백업 등에 복제본당 요금이 청구됩니다.

세 번째이자 마지막으로 알아야 할 사항은 클라우드 공급자가 할인을 제공한다는 것입니다.


---

## 요점 정리

이 장에서는 클라우드에서 MySQL을 사용할 때 알아야 할 사항을 강조했습니다. 실질적인 요점은 다음과 같습니다.

- MySQL의 코드와 기능 호환성은 클라우드에 따라 다릅니다.
- 주의할 점은 오픈소스 MySQL과 비교하여 코드 도는 기능 비호환성을 파악하는 것입니다.
- MySQL은 클라우드 공급자나 타사에 따라 부분적으로 또는 완전히 관리될 수 있습니다.
- 광역 네트워크를 통한 네트워크 지연 시간으로 인해 쿼리 응답 시간이 수십 또는 수백 밀리초 증가합니다.
- 클라우드의 MySQL용 데이터는 일반적으로 네트워크 연결 스토리지에 저장됩니다.
- 네트워크 연결 스토리지의 지연 시간은 HDD와 같은 한 자릿수 밀리초입니다.
- 클라우드는 모든 것에 대해 비용을 청구하고 비용은 종종 예산을 초과할 수 있습니다.
- 클라우드 공급자는 할인을 제공합니다. 전체 가격을 지불하지 마세요.
- 성능은 클라우드에서의 쿼리 응답 시간입니다.


> MySQL 전문가도 계속 배우고 연습합니다. 이에 책을 마무리하며 선 불교의 한마디를 떠올리고자 합니다. 깨달음을 얻기 위해서도, 깨달음을 얻은 후에도 기본에 충실해야 한다는 의미입니다.
> "장작을 패고 물을 길어라"


